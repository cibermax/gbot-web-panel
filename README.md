# GBot Web Panel

GUI для [GBot Trader](https://github.com/steeply/gbot-trader)


## Screenshot

![GBot Web Panel](https://user-images.githubusercontent.com/17174182/42447475-6d2ac0d8-8393-11e8-8b0b-49fe110447ef.png)


## Совместимость

* **Версия 0.0.11 - работает на GBot 1.5.11 (или на старых, но без нового функционала)**
* Версия 0.0.10 - работает на GBot 1.5.10 (или на старых, но без нового функционала)
* Версия 0.0.9 - работает на GBot 1.5.9 (или на старых, но без нового функционала)
* Версия 0.0.8 - работает на GBot 1.5.8 (или на старых, но без нового функционала)
* Версия 0.0.7 - работает на GBot 1.5.7 (или на старых, но без нового функционала)
* Версия 0.0.6 - работает на GBot 1.5.5 - 1.5.7
* Версия 0.0.5 - работает на GBot 1.5.5 - 1.5.7
* Версия 0.0.4 - работает на GBot 1.5.5
* Версия 0.0.3 - работает на GBot 1.5.4


## Подключение

### На локальном компьютере.

1. Укажите в конфигурационном файле бота параметры **PORT** (Порт по которому будет подключатся панель) и **WEB_AUTH_KEY** (ваш Ключ авторизации. Придумайте так же как и любой пароль.).
2. В Web Panel откройте вкладку "Настройки панели", и укажите URL адрес вашего бота в формате http://example:port и Ключ авторизации. (Если GBot и Web Panel запущены на одном компьютере и `PORT=5555` тогда адрес скорей всего будет http://localhost:5555).
3. В главном окне выберите нужного бота. Подключение к нему произойдет автоматически и через несколько секунд загрузится информация.

### На Heroku.

1. Необходимо запустить Gbot в режиме Web service. На Heroku вкладка Resources -> web -> вкл. (Worker включать не нужно!)
2. Укажите в параметрах бота параметр **WEB_AUTH_KEY** (ваш Ключ авторизации. Придумайте так же как и любой пароль.).
3. В Web Panel откройте вкладку "Настройки панели", и укажите URL адрес вашего бота в формате http://example:port и Ключ авторизации. Адрес бота на Heroku вкладка: Settings -> Domains and certificates -> Domain (url формата: https://[yourNameApp].herokuapp.com/)
4. Heroku всегда присваивает порт автоматически, по этому ваш выходной порт всегда будет 80
5. В главном окне выберите нужного бота. Подключение к нему произойдет автоматически и через несколько секунд загрузится информация.
6. Чтобы heroku бот не засыпал воспользуйтесь сервисом http://kaffeine.herokuapp.com и укажите в нем адрес вашего бота (п.3). Сервис будет автоматически раз в 30 минут пинговать бота и не давать ему спать,

### Как подключить несколько ботов к Web Panel?

1. Запустите каждую копию GBot Trader со своим уникальным PORT.
2. В Web Panel во вкладке "Настройки панели" добавьте все адреса ваших ботов.
3. На главном окне выбирайте к какому боту необходимо переподключаться.


### Резервное копирование настроек.

1. В файле **backup_api.json** содержатся ваши ключи для подключения к ботам.
2. В файле **panelSettings.json** содержаться настройки панели.



### Важно!

* Если Web Panel запускается на разных с GBot компьютерах, тогда необходимо чтобы **PORT** был открытым, а сам компьютер был доступен по интернету. (Проверьте ваш Firewall чтобы он не блокировал эти адреса.)
* Панель обладает ограниченным функционалом и не позволяет 100% управлять ботом.
* Параметры требующие перезапуска всего бота необходимо редактировать в конфигурационном файле бота.
* График доступен не для всех бирж.


<br>
Если ваш бот не может по каким-либо причинам иметь прямой выход в интернет или к нему закрыты внешние подключения (ограничения администратора сети), вы можете воспользоваться утилитой [ngrok](https://ngrok.com) для проброски туннеля.

1. Установите утилиту на компьютере где запущен бот.
2. Запустите бота по инструкции выше с указанием нужных портов.
3. Запустите консоль и выполните команду `ngrok http PORT`, где PORT - порт вашего бота (например 5555) (п.2) (Или подробнее читайте документацию к утилите на сайте)
4. Если всё запустилось успешно, то в строке FORWARDING вы получите свой внешний адрес через туннель (например http://khfgjj23.ngrok.io) (Если вы зарегистрируетесь на сайте утилиты, то получите статический адрес)
5. Укажите полученный адрес в настройках Web Panel. Порт указывать не нужно.
